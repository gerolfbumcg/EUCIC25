{
  "hash": "4b11c3256456e469907ca90f9005f3b2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Introduction to Data Manipulation with R and Tidyverse\"\nnumber-sections: true\ntoc: true\ntoc-title: \"Table of Contents\"\n---\n\n\n# Introduction\n\nIn this document, we’ll explore how to perform basic data manipulation and analysis using R and the **tidyverse** package. This tutorial is designed for beginners and provides a step-by-step guide to understanding key operations such as filtering, selecting columns, creating new variables, and summarizing data.\n\nWe’ll start by working with a simple dataset stored in an Excel file. The dataset contains information about countries, their continents, the year of observation, and life expectancy. Using the tidyverse, we’ll demonstrate how to:\n\n1. Load and inspect data from an Excel file.\n2. Filter rows based on specific criteria.\n3. Select specific columns to focus on relevant data.\n4. Create new variables by transforming existing ones.\n5. Summarize data to gain insights.\n\nBy the end of this tutorial, you’ll have a foundational understanding of how to manipulate data in R, preparing you for more advanced data science tasks.\n\n# Installation(s)\n\n## Posit/RStudio Desktop (and R)\n\nWe'll be developing our code in Posit (formerly known as RStudio). You'll need to install it on your system, if it's not already. You can download it via https://posit.co/downloads/. Click the 'Download RStudio' button on that page, no need for RStudio Server for now. Also no need to buy the 'Pro' version. There's really plenty (if not all) you can do for free!\n\nThe RStudio download will guide you to also have R (itself) installed. Just follow instructions and do install R.\n\nR is the script interpretor, RStudio (Posit nowadays) is the Integrated Development Environment (IDE) that has onboard everything you might need. When you compare RStudio to a car, R is the engine.\n\n## R Packages\n\nNext install the R package called 'tidyverse'. Tidyverse is an umbrella package: a package of packages, all centered around data manipulation. \n\nYou can install packages \n\t- by entering the command `install.packages(\"tidyverse\")` in the console window, or\n\t- visually by clicking on the 'Packages' window - click 'Install' button, enter 'tidyverse' and enter 'Install'. See the picture below.\n\n<img src=\"Install_Packages.png\" alt=\"Install Packages\" width=\"400\"/>\n\nIf you want to read more about tidyverse, which is excellently documented, visit: [Tidyverse Official Site](https://www.tidyverse.org/)\n\n# Coding preparation\n\n## First basic syntax\n\n- **Comments in R**: Comments are lines in your code that are not executed. They start with a `#` and are used to explain what the code does, making it easier for others (or yourself) to understand your work. For example:\n  ```r\n  # This is a comment and will not be run\n  x <- 5  # Assigns 5 to x\n  ```\n  Comments are essential for documenting your code and explaining complex logic.\n\n- **Assignments in R**: Assignments in R allow you to store the result of a computation or data operation into a variable. This is typically done using `<-`, which is a convention for clarity, but `=` can also be used. For example:\n  ```r\n  x <- 10  # Assigns the value 10 to the variable x\n  y = 20   # Does the same, but is less commonly used in R scripts\n  ```\n  Once assigned, you can use the variable `x` in subsequent operations. For instance:\n  ```r\n  result <- x + 5  # Adds 5 to x and stores the result in 'result'\n  ```\n- **The `%>%` operator**: Known as the pipe, it comes from the magrittr package (part of tidyverse). It allows you to chain commands in a left-to-right, top-to-bottom style.\n  - Using `%>%` helps avoid deeply nested function calls and makes your code more readable.\n  - For example, instead of `mean(round(c(1.5, 2.5, 3.5)))`, you can write:\n    ```r\n    c(1.5, 2.5, 3.5) %>% round() %>% mean()\n    ```\n- This tutorial demonstrates how to use `%>%` effectively.\n\n- **The `c()` function**: The `c()` function in R creates a vector (a one-dimensional array). Arrays are collections of data elements of the same type.\n  - For example, `c(1, 2, 3)` creates a numeric vector containing the values `1`, `2`, and `3`.\n  - so `c(1, 2, 3)` is mostly read as 'An array/vector consisting of the elements `1`, `2` and `3`'.\n\n\n## Example data table\n\nThe following table is used as an example in this document. We already saved it for you as an Excel file named `example_data.xlsx`.\n\n| Country       | Continent | Year | LifeExp |\n|---------------|-----------|------|---------|\n| Netherlands   | Europe    | 2007 | 80.6    |\n| Germany       | Europe    | 2007 | 79.8    |\n| Nigeria       | Africa    | 2007 | 46.9    |\n| South Africa  | Africa    | 2007 | 49.0    |\n| China         | Asia      | 2007 | 72.9    |\n| India         | Asia      | 2007 | 64.7    |\n\n\n# Now let's CODE!\n\n## Code listing\n\nIn the following blueish blocks you see code examples. \n\nHere's the code, with no comments and no output. We'll print the output along with it as well, after this code block. So later on we'll repeat the code and also see the output in between the blueish code blocks. First the 'bare' code unevaluated:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \nlibrary(readxl)\n\nfile_path <- \"example_data.xlsx\" \ndata <- read_excel(file_path)\n\ndata_2007 <- data %>%\n  filter(Year == 2007)\n\ndata_selected <- data_2007 %>%\n  select(Country, Continent, LifeExp)\n\ndata_with_months <- data_selected %>%\n  mutate(LifeExp_Months = LifeExp * 12)\n\nlifeExp_summary <- data_with_months %>%\n  group_by(Continent) %>%\n  summarise(Mean_LifeExp = mean(LifeExp))\n```\n:::\n\n\n## Same code, now with evaluation (and comments)\n\nNow let's have the code evaluated as well. In between the blueish code blocks are the outputs on white backgroud. In RStudio you'll see that output in the console window.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First, install and load the required packages\n# Uncomment (= remove the '# ' at the start) the following lines if the packages are not installed yet.\n# Uncommenting can also be done by selecting the line(s) and pressing Ctrl-Shift-C (Cmd-Shift-C on Mac)\n# install.packages(\"tidyverse\")\n# install.packages(\"readxl\")\n\n# The next lines of code you don't need to understand yet. They're provided as a convenience for you to \n# and install the required packages if they turned out not to be installed yet.\n# Mostly, however, this is done like in the lines 4 and 5 lines than this one.\n\n# Check and install required packages (again: for now don't bother about these 'if blocks')\nif (!require(tidyverse, quietly=T)) {\n  install.packages(\"tidyverse\")\n}\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\n# Note that tidyverse is quite verbose (you can ignore that output, also ignore the 'Conflicts')\nif (!require(readxl)) {\n  install.packages(\"readxl\")\n}\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: readxl\n```\n\n\n:::\n\n```{.r .cell-code}\n# Load the libraries \n# this is line 1 in most scripts)\nlibrary(tidyverse) \nlibrary(readxl)\n\n# Step 1: Read an Excel file\n# Make sure you have an Excel file named \"example_data.xlsx\": should be provided to you already\n# with a table like the one described above.\n\n# the character string \"example_data.xlsx\" is assigned to variable file_path next\nfile_path <- \"example_data.xlsx\" \n# and likewise the result of the function `read_excel` called with `file_path` as argument, \n# will be kept in-memory in the variable called `data`.\ndata <- read_excel(file_path)\n\n# View the first few rows of the data\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Country      Continent  Year LifeExp\n  <chr>        <chr>     <dbl>   <dbl>\n1 Netherlands  Europe     2007    80.6\n2 Germany      Europe     2007    79.8\n3 Nigeria      Africa     2007    46.9\n4 South Africa Africa     2007    49  \n5 China        Asia       2007    72.9\n6 India        Asia       2007    64.7\n```\n\n\n:::\n\n```{.r .cell-code}\n# Step 2: Filter the data\n# We only want data for the year 2007\ndata_2007 <- data %>%\n  filter(Year == 2007)\n\n# View the first few rows of the filtered data\nhead(data_2007)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Country      Continent  Year LifeExp\n  <chr>        <chr>     <dbl>   <dbl>\n1 Netherlands  Europe     2007    80.6\n2 Germany      Europe     2007    79.8\n3 Nigeria      Africa     2007    46.9\n4 South Africa Africa     2007    49  \n5 China        Asia       2007    72.9\n6 India        Asia       2007    64.7\n```\n\n\n:::\n\n```{.r .cell-code}\n# Step 3: Select specific columns\n# Keep only the columns 'Country', 'Continent', and 'LifeExp'\ndata_selected <- data_2007 %>%\n  select(Country, Continent, LifeExp)\n\n# View the first few rows of the selected data\nhead(data_selected)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  Country      Continent LifeExp\n  <chr>        <chr>       <dbl>\n1 Netherlands  Europe       80.6\n2 Germany      Europe       79.8\n3 Nigeria      Africa       46.9\n4 South Africa Africa       49  \n5 China        Asia         72.9\n6 India        Asia         64.7\n```\n\n\n:::\n\n```{.r .cell-code}\n# Step 4: Add a new column\n# Calculate life expectancy in months and add it as a new column\ndata_with_months <- data_selected %>%\n  mutate(LifeExp_Months = LifeExp * 12)\n\n# View the first few rows of the modified data\nhead(data_with_months)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Country      Continent LifeExp LifeExp_Months\n  <chr>        <chr>       <dbl>          <dbl>\n1 Netherlands  Europe       80.6           967.\n2 Germany      Europe       79.8           958.\n3 Nigeria      Africa       46.9           563.\n4 South Africa Africa       49             588 \n5 China        Asia         72.9           875.\n6 India        Asia         64.7           776.\n```\n\n\n:::\n\n```{.r .cell-code}\n# Step 5: Summarize the data\n# Calculate the average life expectancy per continent\nlifeExp_summary <- data_with_months %>%\n  group_by(Continent) %>%\n  summarise(Mean_LifeExp = mean(LifeExp))\n\n# View the summary\nprint(lifeExp_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n  Continent Mean_LifeExp\n  <chr>            <dbl>\n1 Africa            48.0\n2 Asia              68.8\n3 Europe            80.2\n```\n\n\n:::\n:::",
    "supporting": [
      "Basic_Data_Science_in_R_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}